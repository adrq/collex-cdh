function showPartialInLightBox(e,t,a){"use strict";var l=new Element("div",{id:"gd_lightbox_contents"}),n=l.wrap("div",{id:"gd_lightbox_id"}),i=new Element("center",{id:"gd_lightbox_img_spinner"});i.addClassName("gd_lightbox_img_spinner"),i.appendChild(new Element("div").update("Loading...")),i.appendChild(new Element("img",{src:a,alt:""})),i.appendChild(new Element("div").update("Please wait")),n.appendChild(i);var s=new ShowDivInLightbox({title:t,div:n});if("http"===e.substr(0,4)){var d=new Element("iframe",{style:"width:500px;height:700px;border: none;"});l.appendChild(d),d.src=e;var o=$("gd_lightbox_img_spinner");o&&o.remove(),s.dlg.center()}else{var r=function(){var e=$("gd_lightbox_img_spinner");e&&e.remove(),$("gd_lightbox_contents").show(),s.dlg.center()},u=function(t){var a=$("gd_lightbox_img_spinner");a&&a.remove(),$("gd_lightbox_contents").update(formatFailureMsg(t,e)),$("gd_lightbox_contents").setStyle({width:"450px",color:"red"}),$("gd_lightbox_contents").show(),s.dlg.center()};serverAction({action:{actions:e,els:"gd_lightbox_contents",params:{},onSuccess:r,onFailure:u}})}}function showInLightbox(e){var t=e.title,a=e.img,l=e.spinner,n=e.size,i=null,s=function(){var e=$("gd_lightbox_img_spinner");e&&e.remove();var t=$("gd_lightbox_img");if(t.show(),n&&(t.width>n||t.height>n)){var a=$("gd_lightbox_dlg"),l=parseInt(a.getStyle("width"))-t.width,s=parseInt(a.getStyle("height"))-t.height,d=t.width>t.height,o=t.width,r=t.height;d?t.width=n:t.height=n;var u=function(e){d?t.width=e.width-l:t.height=e.height-s},c=null;c=d?new YAHOO.util.Resize("gd_lightbox_dlg",{maxWidth:o+l,minWidth:140,ratio:!0,handles:["br"]}):new YAHOO.util.Resize("gd_lightbox_dlg",{maxHeight:r+s+16,minHeight:140,ratio:!0,handles:["br"]}),c.on("resize",u),$("gd_lightbox_dlg_h").setStyle({whiteSpace:"nowrap",overflow:"hidden"})}i.dlg.center()},d="lightbox",o=a.split("."),r=o[o.length-1],u=!1,c=new Element("img",{id:"gd_lightbox_img",alt:""});"pdf"===r.toLowerCase()?(c=new Element("object",{id:"gd_lightbox_img",alt:""}),c.setAttribute("data",a),u=!0):c.setAttribute("src",a),c.setStyle({display:"none"});var p=c.wrap("div",{id:d+"_id"}),g=new Element("center",{id:"gd_lightbox_img_spinner"});if(g.addClassName("gd_lightbox_img_spinner"),g.appendChild(new Element("div").update("Image Loading...")),g.appendChild(new Element("img",{src:l,alt:""})),g.appendChild(new Element("div").update("Please wait")),p.appendChild(g),i=new ShowDivInLightbox({title:t,div:p}),u){var h=jQuery("#gd_lightbox_img"),m=jQuery("#gd_lightbox_img_spinner");h.attr("onload",function(){m.hide(),h.show(),h.width("500px"),h.height("650px"),i.dlg.center()})}else c.observe("load",s)}function dlgAjax(e,t,a,l){var n=function(){e.cancel()},i=function(t){e.setFlash(t.responseText,!0)};serverAction({action:{actions:t,els:a,params:l,onSuccess:n,onFailure:i}})}function genericAjaxFail(e,t,a){var l=formatFailureMsg(t,a);e?e.setFlash(l,!0):new MessageBoxDlg("Communication Error",l)}window.escFxn=null,window.dlgThis=null,window.enterFxn=null;var initializeSelectCtrl=function(e,t,a){var l=new YAHOO.widget.Button(e,{type:"menu",menu:e+"select",selectedMenuItem:new YAHOO.widget.MenuItem(t)}),n=function(e){var t=e.newValue,n=t.cfg.getProperty("text");this.set("label",'<span class="yui-button-label">'+n+"</span>"),l.currSelectedValue=t.value,a(t.value)};return l.setSelection=function(e){l.currSelectedValue=e,l.get("selectedMenuItem").value=e},l.on("selectedMenuItemChange",n),l.currSelectedValue=t,l},GeneralDialog=Class.create({initialize:function(e){this.class_type="GeneralDialog";var t=this,a=e.this_id,l=e.pages,n=e.focus,i=e.flash_notice;void 0===i&&(i="");var s=e.body_style?e.body_style:"",d=e.row_style,o=e.title,r=e.width,u=a+"_flash",c=[],p=[],g=null,h={},m={},v=[],_=Class.create({initialize:function(e){var t=e.fn_call,a=e.call_params;this.execute=function(){t(a)}}}),f=function(e){var t=$$("meta[name=csrf-param]")[0].content,a=$$("meta[name=csrf-token]")[0].content;e.appendChild(new Element("input",{id:t,type:"hidden",name:t,value:a}))},w=function(e,t){var a=$(this),l=a.value,n=GeneralDialog.makeId(t.id),i=$(n);i.value=l,t.callback&&t.callback(n,l,t.arg0)},b=function(e,t,a,l,n,i){var s=new Element("input",{id:GeneralDialog.makeId(e),name:e});if(t&&t.length>0){var d=void 0!==a&&null!==a?a:t[0].value;s.writeAttribute("value",d)}s.addClassName("hidden"),i.appendChild(s);var o=null,r=function(t,a,i){var d=i.cfg.getProperty("text");o.set("label",d),s.writeAttribute("value",i.value),l&&l(e,i.value,n)},u=[],c="";if(t)for(var p=0;p<t.length;p++)u.push({text:t[p].text,value:t[p].value,onclick:{fn:r}}),t[p].value===a&&(c=t[p].text);return o=new YAHOO.widget.Button({type:"menu",label:c,name:e,menu:u,container:i,lazyloadmenu:!1})},k="gd_modal_dlg_parent",y=$(k);if(null===y){var C=document.getElementsByTagName("body").item(0);$(C).down("div").insert({before:new Element("div",{id:k,style:"text-align:left;"})})}this.getOuterDomElement=function(){return $(a)},this.getEditor=function(e){return c[e]},this.getAllData=function(){var e=$$("#"+a+" input"),t=$$("meta[name=csrf-param]")[0].content,l=$$("meta[name=csrf-token]")[0].content,n={};n[t]=l,e.each(function(e){"checkbox"===e.type?n[e.name]=e.checked:"radio"===e.type?e.checked&&(n[e.name]=e.value):"button"!==e.type&&(n[e.name]=e.value)}),c.each(function(e){e.save()}),p.each(function(e){var t=e.getSelection();t.field&&(n[t.field]=t.value)});var i=$$("#"+a+" textarea");return i.each(function(e){var t=e.name,a=e.value;n[t]=a}),n},this.getTitle=function(){return o};var x=function(){this.cancel()},D=new YAHOO.widget.Dialog(a,{constraintoviewport:!0,width:r,modal:!0,close:void 0!==o,draggable:void 0!==o,underlay:"shadow",buttons:null});this.setFlash=function(e,t){var a=$(u);a&&(D&&D.show(),a.update(e),t?(a.addClassName("gd_flash_notice_error"),a.removeClassName("gd_flash_notice_ok")):(a.addClassName("gd_flash_notice_ok"),a.removeClassName("gd_flash_notice_error")))},void 0!==o&&D.setHeader(o);var E=new YAHOO.util.KeyListener(document,{keys:27},{fn:x,scope:D,correctScope:!0},"keyup"),A=function(e,t){h[g]&&(h[g](null,m[g]),t[1].preventDefault())},S=new YAHOO.util.KeyListener(document,{keys:13},{fn:A,scope:D,correctScope:!0},"keydown");window.escFxn=x,window.enterFxn=A,window.dlgThis=D,D.cfg.queueProperty("keylisteners",[E,S]);var I=[],N=[],O=new Element("div",{id:a+"_"+s});O.addClassName(s);var G=new Element("div",{id:u}).update(i);G.addClassName("gd_flash_notice_ok"),O.appendChild(G);var H=function(e,l,n,i,s,d,o){var r=new Element("input",{id:a+"_btn"+N.length,type:o,value:l});e.appendChild(r);var u=n;N.push({id:a+"_btn"+N.length,event:"click",klass:u,callback:i,param:{curr_page:s,arg0:d,dlg:t}})},F=function(e,t,a,l){var n=new Element("input",{id:GeneralDialog.makeId(t),type:"text",name:t});return a&&n.addClassName(a),void 0!==l&&n.writeAttribute({value:l}),e.appendChild(n),n},z=function(e){new Ajax.Autocompleter(e.input_id,e.results_id,e.url,{minChars:1})},L=function(e,t,a,l,n,i){var s=GeneralDialog.makeId(t),d=s+"_wrapper",o=new Element("div",{id:d});void 0!==a&&o.addClassName(a);var r=new Element("input",{id:s,type:"text",name:t});void 0!==i&&r.writeAttribute({value:i}),o.appendChild(r);var u=s+"_dd",c=new Element("div",{id:u});c.addClassName("gd_autocomplete"),o.appendChild(c),e.appendChild(o),v.push(new _({fn_call:z,call_params:{input_id:s,results_id:u,url:l,token:n}}))},B=function(){},M=function(e,t,a,l){var n=new Element("input",{id:GeneralDialog.makeId(t),name:t,type:"hidden"});a&&n.addClassName(a),void 0!==l&&null!==l&&n.writeAttribute({value:l}),e.appendChild(n)},Y=function(e,t,l,n,i,s){var d={id:a+"_a"+I.length,onclick:"return false;",href:"#"};s&&(d.title=s);var o=new Element("a",d).update(l);t&&o.addClassName(t),e.appendChild(o),I.push({id:a+"_a"+I.length,event:"click",callback:n,param:i})},T=function(e,l,n,i,s,d){var o=a+"_a"+I.length;Y(e,n,"",i,{curr_page:s.page,button_id:o,context:d,dlg:t},l)},W=function(e,t){var a=$(t.button_id),l=t.context,n=l.style,i={},s=$(l.dest+"_"+l.value);a.hasClassName("gd_pressed")?(a.removeClassName("gd_pressed"),i[n]="",$(l.dest).setStyle(i),s.value=0):(a.addClassName("gd_pressed"),i[n]=l.value,$(l.dest).setStyle(i),s.value=1)},P=function(e,t){var a=this.value;"blur"===e.type&&""===a?($(this).addClassName("gd_input_hint_style"),this.value=t.prompt):"focus"===e.type&&a===t.prompt?(this.value="",$(this).removeClassName("gd_input_hint_style")):"keyup"===e.type&&t.callback(this.value)};l.each(function(e){var n=new Element("form",{id:e.page,name:e.page});n.addClassName(e.page),n.addClassName("gd_switchable_element"),l.length>1?n.addClassName("hidden"):g=e.page,O.appendChild(n),e.rows.each(function(l){var i=new Element("div");d&&i.addClassName(d),n.appendChild(i),l.each(function(l){if(void 0!==l.text){var s=new Element("span").update(l.text);l.klass&&s.addClassName(l.klass),void 0!==l.id&&s.writeAttribute({id:GeneralDialog.makeId(l.id)}),i.appendChild(s)}else if(void 0!==l.picture){var d=l.alt?l.alt:l.picture,o=new Element("img",{src:l.picture,alt:d});l.klass&&o.addClassName(l.klass),void 0!==l.id&&o.writeAttribute({id:GeneralDialog.makeId(l.id)}),i.appendChild(o)}else if(void 0!==l.input)F(i,l.input,l.klass,l.value);else if(void 0!==l.inputFilter){var r="gd_input_hint_style";void 0!==l.klass&&(r+=" "+l.klass);var u=F(i,l.inputFilter,r,l.value);u.value=l.prompt,I.push({id:l.inputFilter,event:"keyup",callback:P,param:{prompt:l.prompt,callback:l.callback}}),I.push({id:l.inputFilter,event:"blur",callback:P,param:{prompt:l.prompt,callback:l.callback}}),I.push({id:l.inputFilter,event:"focus",callback:P,param:{prompt:l.prompt,callback:l.callback}})}else if(void 0!==l.inputWithStyle){var c=l.value?l.value:{text:"",isBold:!1,isItalic:!1,isUnderline:!1},g=F(i,l.inputWithStyle,l.klass,c.text);T(i,"Bold","gd_bold_button"+(c.isBold?" gd_pressed":""),W,e,{dest:l.inputWithStyle,style:"fontWeight",value:"bold"}),M(i,l.inputWithStyle+"_bold","",c.isBold?"1":"0"),T(i,"Italic","gd_italic_button"+(c.isItalic?" gd_pressed":""),W,e,{dest:l.inputWithStyle,style:"fontStyle",value:"italic"}),M(i,l.inputWithStyle+"_italic","",c.isItalic?"1":"0"),T(i,"Underline","gd_underline_button"+(c.isUnderline?" gd_pressed":""),W,e,{dest:l.inputWithStyle,style:"textDecoration",value:"underline"}),M(i,l.inputWithStyle+"_underline","",c.isUnderline?"1":"0"),c.isBold&&g.setStyle({fontWeight:"bold"}),c.isItalic&&g.setStyle({fontStyle:"italic"}),c.isUnderline&&g.setStyle({textDecoration:"underline"})}else if(void 0!==l.autocomplete)L(i,l.autocomplete,l.klass,l.url,l.token,l.value);else if(void 0!==l.hidden)M(i,l.hidden,l.klass,l.value);else if(void 0!==l.password){var v=new Element("input",{id:GeneralDialog.makeId(l.password),name:l.password,type:"password"});l.klass&&v.addClassName(l.klass),void 0!==l.value&&null!==l.value&&v.writeAttribute({value:l.value}),i.appendChild(v)}else if(void 0!==l.colorpick)B(i,l.colorpick,l.klass,l.callback,l.value);else if(void 0!==l.button){var _=l.klass;l.isDefault&&(h[e.page]=l.callback,m[e.page]={curr_page:e.page,arg0:l.arg0,dlg:t},_=void 0===_?"default":_+" default"),H(i,l.button,_,l.callback,e.page,l.arg0,l.isSubmit===!0?"submit":"button")}else if(void 0!==l.icon_button)T(i,l.icon_button,l.klass,l.callback,e,l.context);else if(void 0!==l.link)Y(i,l.klass,l.link,l.callback,{curr_page:e.page,arg0:l.arg0,dlg:t},l.title);else if(void 0!==l.select)if(window.mockAjax)b(l.select,l.options,l.value,l.callback,l.arg0,i);else{var y=new Element("input",{id:GeneralDialog.makeId(l.select),name:l.select});if(l.options&&l.options.length>0){var C=void 0!==l.value&&null!==l.value?l.value:l.options[0].value;y.writeAttribute("value",C)}y.addClassName("hidden"),i.appendChild(y);var x=new Element("select",{id:a+"_sel"+I.length});l.klass&&x.addClassName(l.klass),i.appendChild(x),I.push({id:a+"_sel"+I.length,event:"change",callback:w,param:{id:l.select,callback:l.callback,arg0:l.arg0}}),l.options&&l.options.each(function(e){var t=new Element("option",{value:e.value}).update(e.text);l.value===e.value&&t.writeAttribute("selected","selected"),x.appendChild(t)})}else if(void 0!==l.custom){var D=l.custom;p.push(l.custom);var E=D.getMarkup();l.klass&&E.addClassName(l.klass),i.appendChild(E)}else if(void 0!==l.checkbox){var A=new Element("input",{id:GeneralDialog.makeId(l.checkbox),type:"checkbox",value:"1",name:l.checkbox});l.klass&&A.addClassName(l.klass),("1"===l.value||l.value===!0)&&(A.checked=!0),i.appendChild(A)}else if(void 0!==l.checkboxList){var S=new Element("table"),N=new Element("tbody");S.appendChild(N);var O=l.columns?l.columns:1;0>=O&&(O=1);for(var G=Math.ceil(l.items.length/O),z=null,j=function(e){return z===e},V=0;G>V;V++){var U=new Element("tr");S.appendChild(U);for(var R=0;O>R;R++){var J=R*G+V;if(J<l.items.length){var K=l.items[J];z=K;var Q=K;"string"!=typeof K&&(z=K[0],Q=K[1]);var q=new Element("td",{style:"padding: 0 0.5em 0 0.5em;"}),X=l.checkboxList+"["+z+"]",Z=new Element("input",{id:GeneralDialog.makeId(X),type:"checkbox",value:"1",name:X});l.klass&&Z.addClassName(l.klass),l.selections&&l.selections.detect(j)&&(Z.checked=!0),q.appendChild(Z);var ee=new Element("span").update(Q);q.appendChild(ee),U.appendChild(q)}}i.appendChild(S)}}else if(void 0!==l.radioList){var te=l.options,ae=l.radioList,le=l.value,ne=l.klass,ie=new Element("table");ne&&ie.addClassName(ne),i.appendChild(ie);var se=new Element("tbody");ie.appendChild(se),te.each(function(e){var t=e,a=e;"string"!=typeof e&&(t=e.text,a=e.value);var l=new Element("tr");se.appendChild(l);var n=new Element("td");l.appendChild(n);var i=new Element("input",{id:GeneralDialog.makeId(ae+"_"+a),type:"radio",value:a,name:ae});le===a&&i.writeAttribute("checked","true"),n.appendChild(i),n=new Element("td"),l.appendChild(n),n.appendChild(new Element("span").update(" "+t+"<br />"))})}else if(void 0!==l.textarea){var de=new Element("div"),oe=new Element("textarea",{id:GeneralDialog.makeId(l.textarea),name:l.textarea});if(l.klass&&(oe.addClassName(l.klass),de.addClassName(l.klass)),void 0!==l.value&&null!==l.value){var re=l.value.strip();re=re.escapeHTML(),oe.update(re)}de.appendChild(oe),i.appendChild(de)}else if(void 0!==l.date){for(var ue=l.value?l.value.split(" ")[0].split("-"):["","",""],ce=new Element("select",{id:GeneralDialog.makeId(l.date.gsub("*","1i")),name:l.date.gsub("*","(1i)")}),pe=2005;2015>pe;pe++)ue[0]===""+pe?ce.appendChild(new Element("option",{value:""+pe,selected:"selected"}).update(""+pe)):ce.appendChild(new Element("option",{value:""+pe}).update(""+pe));for(var ge=new Element("select",{id:GeneralDialog.makeId(l.date.gsub("*","2i")),name:l.date.gsub("*","(2i)")}),he=["January","February","March","April","May","June","July","August","September","October","November","December"],me=["01","02","03","04","05","06","07","08","09","10","11","12"],ve=0;ve<he.length;ve++)ue[1]===me[ve]?ge.appendChild(new Element("option",{value:ve+1,selected:"selected"}).update(he[ve])):ge.appendChild(new Element("option",{value:ve+1}).update(he[ve]));for(var _e=new Element("select",{id:GeneralDialog.makeId(l.date.gsub("*","3i")),name:l.date.gsub("*","(3i)")}),fe=1;31>=fe;fe++)ue[2]===(10>fe?"0":"")+fe?_e.appendChild(new Element("option",{value:""+fe,selected:"selected"}).update(""+fe)):_e.appendChild(new Element("option",{value:""+fe}).update(""+fe));var we=l.klass?l.klass+" ":"";ce.addClassName(we+"gd_year"),ge.addClassName(we+"gd_month"),_e.addClassName(we+"gd_day"),i.appendChild(ce),i.appendChild(ge),i.appendChild(_e)}else if(void 0!==l.image){var be=new Element("div",{id:GeneralDialog.makeId(l.image)+"_div"}),ke=void 0!==l.value&&null!==l.value?l.value:"";if(ke.length>0){var ye=l.alt?l.alt:ke;be.appendChild(new Element("img",{src:ke,id:GeneralDialog.makeId(l.image)+"_img",alt:ye}))}var Ce=function(){var e=new Element("input",{id:GeneralDialog.makeId(l.image),type:"file",name:l.image});return l.size&&e.writeAttribute({size:l.size}),e},xe=Ce();if(be.appendChild(xe),l.klass&&be.addClassName(l.klass),i.appendChild(be),f(i),void 0!==l.removeButton){var De=function(){var e=$(GeneralDialog.makeId(l.image));e.remove(),e=$(GeneralDialog.makeId(l.image)+"_img"),e&&(e.src="");var t=Ce();be.appendChild(t)};Y(i,a,null,l.removeButton,De,{})}l.no_iframe?n.writeAttribute({enctype:"multipart/form-data",method:"post"}):(n.writeAttribute({enctype:"multipart/form-data",target:"gd_upload_target",method:"post"}),$(k).appendChild(new Element("iframe",{id:"gd_upload_target",name:"gd_upload_target",src:"",style:"display:none;width:0;height:0;border:0px solid #fff;"})))}else if(void 0!==l.file){var Ee=new Element("input",{id:GeneralDialog.makeId(l.file),type:"file",name:l.file});l.size&&Ee.writeAttribute({size:l.size}),i.appendChild(Ee),l.klass&&Ee.addClassName(l.klass),i.appendChild(Ee),f(i),l.no_iframe?n.writeAttribute({enctype:"multipart/form-data",method:"post"}):(n.writeAttribute({enctype:"multipart/form-data",target:"gd_upload_target",method:"post"}),$(k).appendChild(new Element("iframe",{id:"gd_upload_target",name:"gd_upload_target",src:"#",style:"display:none;width:0;height:0;border:0px solid #fff;"})))}else void 0!==l.rowClass&&i.addClassName(l.rowClass)})});var i=new Element("div");i.addClassName("clear_both"),n.appendChild(i)}),D.setBody(O);var j=YAHOO.util.Dom.getViewportHeight()/2+YAHOO.util.Dom.getDocumentScrollTop();jQuery(D.element).css("top",j+"px"),D.render(k),D.cancelEvent.subscribe(function(){setTimeout(function(){D.destroy()},500)}),I.each(function(e){YAHOO.util.Event.addListener(e.id,e.event,e.callback,e.param)}),N.each(function(e){var t=function(t,a){var l=e.callback.bind($(a));l(t,e.param)},a=$(e.id).type;new YAHOO.widget.Button(e.id,{onclick:{fn:t,obj:e.id,scope:this}}),e.klass&&YAHOO.util.Event.onContentReady(e.id,function(){$(e.id).addClassName(e.klass)}),YAHOO.util.Event.onContentReady(e.id,function(){$(e.id+"-button").type=a})}),p.each(function(e){e.delayedSetup&&e.delayedSetup()}),v.each(function(e){e.execute()}),n&&$(n)&&$(n).focus(),this.changePage=function(e,t){g=e;var l=$(a).select(".gd_switchable_element");l.each(function(t){t.hasClassName(e)?t.removeClassName("hidden"):t.addClassName("hidden")}),t&&$(t)&&$(t).focus()},this.cancel=function(){D.cancel()},this.hide=function(){D.hide()},this.show=function(){D.show()},this.center=function(){var e=$(a),t=parseInt(e.getStyle("width"),10),l=parseInt(e.getStyle("height"),10),n=YAHOO.util.Dom.getViewportWidth(),i=YAHOO.util.Dom.getViewportHeight(),s=(n-t)/2,d=(i-l)/2;s+=YAHOO.util.Dom.getDocumentScrollLeft(),d+=YAHOO.util.Dom.getDocumentScrollTop(),0>s&&(s=0),0>d&&(d=0);var o=e.up();o.setStyle({left:s+"px",top:d+"px"})},this.initTextAreas=function(e){var t=e.toolbarGroups,l=e.linkDlgHandler,n=e.footnote,i=e.bodyStyle,s=e.onlyClass,d=$(a),o=parseInt(d.getStyle("width"),10),r=d.down(".bd"),u=parseInt(r.getStyle("padding-left")),p=parseInt(r.getStyle("padding-right")),g=o-u-p,h=$$("#"+a+" textarea");h.each(function(e){if(void 0===s||e.hasClassName(s)){var a=new RichTextEditor({id:e.id,toolbarGroups:t,linkDlgHandler:l,width:g,footnote:n,populate_exhibit_only:l.getPopulateUrls()[0],populate_all:l.getPopulateUrls()[1],bodyStyle:i});a.attachToDialog(D),c.push(a)}},this)}}});GeneralDialog.cancelCallback=function(e,t){t.dlg.cancel()},GeneralDialog.makeId=function(e){return e.gsub(/\[/,"_").gsub("]","")};var MessageBoxDlg=Class.create({initialize:function(e,t){this.class_type="MessageBoxDlg";var a={page:"layout",rows:[[{text:t,klass:"gd_message_box_label"}],[{rowClass:"gd_last_row"},{button:"Close",callback:GeneralDialog.cancelCallback,isDefault:!0}]]},l={this_id:"gd_message_box_dlg",pages:[a],body_style:"gd_message_box_dlg",row_style:"gd_message_box_row",title:e},n=new GeneralDialog(l);n.center(),this.cancel=function(){n.cancel()}}}),ShowDivInLightbox=Class.create({initialize:function(e){this.class_type="ShowDivInLightbox";var t=Class.create({id:e.id,div:e.div,getMarkup:function(){if(this.div)return this.div;var e=$(this.id).innerHTML,t=new Element("div").update(e);return t}}),a={page:"layout",rows:[[{custom:new t,klass:e.klass}],[{rowClass:"gd_last_row"},{button:"Close",callback:GeneralDialog.cancelCallback,isDefault:!0}]]},l={this_id:"gd_lightbox_dlg",pages:[a],body_style:"gd_lightbox_dlg",row_style:"gd_lightbox_row",title:e.title},n=new GeneralDialog(l);n.center(),this.dlg=n}}),ConfirmDlg3=Class.create({initialize:function(e,t,a,l,n,i,s){this.yes=function(e,t){t.dlg.cancel(),i()},this.no=function(e,t){t.dlg.cancel(),s()};var d={page:"layout",rows:[[{rowClass:"gd_confirm_msg_row"},{text:t,klass:"gd_confirm_label"}],[{rowClass:"gd_last_row"},{button:a,callback:this.yes,isDefault:!0},{button:l,callback:this.no},{button:n,callback:GeneralDialog.cancelCallback}]]},o={this_id:"gd_confirm_dlg",pages:[d],body_style:"gd_confirm_dlg",row_style:"gd_confirm_row",title:e},r=new GeneralDialog(o);r.center()}}),singleInputDlg=function(e,t){var a=e.title,l=e.prompt,n=e.id,i=e.okStr?e.okStr:"Ok",s=e.actions,d=e.onSuccess,o=e.onFailure,r=e.target_els,u=e.extraParams?e.extraParams:{},c=e.noDefault,p=e.pleaseWaitMsg?e.pleaseWaitMsg:"Please wait...",g=null,h=e.verify,m=e.verifyFxn,v=void 0===e.body_style?"gd_message_box_dlg":e.body_style,_=e.populate,f=e.explanation_klass;this.class_type="singleInputDlg";var w=function(e){g.cancel(),d&&d(e)},b=function(){var e=s;Object.isArray(e)||(e=[e]);var t=r;Object.isArray(t)||(t=[t]),serverAction({action:{actions:e.clone(),els:t.clone(),onSuccess:w,dlg:g,onFailure:o,params:u}})};this.ok=function(e,t){t.dlg.setFlash(p,!1);var a=t.dlg.getAllData();if(u[n]=a[n],m){var l=m(u);if(l)return void t.dlg.setFlash(l,!0)}h?serverAction({action:{actions:h,els:"gd_bit_bucket",onSuccess:b,dlg:g,params:u}}):(Object.isArray(s)||(s=[s]),"string"==typeof r?r=[r]:(null===r||void 0===r)&&(r=[null]),serverAction({action:{actions:s.clone(),els:r.clone(),onSuccess:w,dlg:g,onFailure:o,params:u}}))};var k={page:"layout",rows:[[{text:l,klass:"gd_text_input_dlg_label"},t]]};e.explanation_text&&k.rows.push([{text:e.explanation_text,id:"gd_postExplanation",klass:f}]),e.noOk?(k.rows.push([{rowClass:"gd_last_row"},{button:"Cancel",callback:GeneralDialog.cancelCallback,isDefault:!0}]),c&&(k.rows[1][0].isDefault=null)):(k.rows.push([{rowClass:"gd_last_row"},{button:i,callback:this.ok,isDefault:!0},{button:"Cancel",callback:GeneralDialog.cancelCallback}]),c&&(k.rows[1][1].isDefault=null));var y={this_id:"gd_text_input_dlg",pages:[k],body_style:v,row_style:"gd_message_box_row",title:a,focus:GeneralDialog.makeId(n)};g=new GeneralDialog(y),g.center(),_&&_(g)},TextInputDlg=Class.create({initialize:function(e){var t=e.id,a=e.value,l=void 0===e.inputKlass?"gd_text_input_dlg_input":e.inputKlass,n=e.autocompleteParams;if(n){var i={autocomplete:t,klass:l,url:n.url,token:n.token};singleInputDlg(e,i)}else{var s={input:t,klass:l,value:a};singleInputDlg(e,s)}}}),SelectInputDlg=Class.create({initialize:function(e){var t=e.id,a=e.options,l=e.explanation,n=e.value,i=e.populateUrl,s={select:t,klass:"gd_select_dlg_input",options:a,value:n},d=function(t){var a=function(e){var a=[];t.setFlash("",!1);try{e.responseText.length>0&&(a=e.responseText.evalJSON(!0))}catch(l){return void t.setFlash(l,!0)}var n=$$(".gd_select_dlg_input"),i=n[0];i.update(""),a=a.sortBy(function(e){return e.text}),a.each(function(e){i.appendChild(new Element("option",{value:e.value}).update(e.text))})},l=function(e){genericAjaxFail(t,e,i)};serverAction({action:{actions:i,els:"gd_bit_bucket",onSuccess:a,onFailure:l,params:e.extraParams}})};if(l){var o=function(e){for(var t=0;t<a.length;t++)if(a[t].value===e)return l[t];return l[0]},r=function(e,t){$("gd_postExplanation").update(o(t))};s.callback=r,e.explanation_text=o(n)}i&&(e.populate=d),singleInputDlg(e,s)}}),RteInputDlg=Class.create({initialize:function(e){var t=e.title,a=e.okCallback,l=e.value,n=e.populate_urls,i=e.progress_img,s=e.extraButton;this.class_type="RteInputDlg",this.ok=function(e,t){t.dlg.cancel();var l=t.dlg.getAllData();a(l.gd_textareaValue)};var d={page:"layout",rows:[[{textarea:"gd_textareaValue",value:l}],[{rowClass:"gd_last_row"},{button:"Ok",callback:this.ok},{button:"Cancel",callback:GeneralDialog.cancelCallback}]]};void 0!==s&&d.rows[1].push({button:s.label,callback:s.callback});var o={this_id:"gd_text_input_dlg",pages:[d],body_style:"gd_message_box_dlg",row_style:"gd_message_box_row",title:t},r=new GeneralDialog(o);r.initTextAreas({toolbarGroups:["fontstyle","link"],linkDlgHandler:new LinkDlgHandler(n,i)}),r.center();var u=$("gd_textareaValue");u.select(),u.focus()}});