nulljQuery(document).ready(function(e){"use strict";function a(e){var a={a:"Archive",discipline:"Discipline",g:"Genre",q:"Search Term",t:"Title",aut:"Author",ed:"Editor",pub:"Publisher",r_art:"Artist",r_own:"Owner",y:"Year",lang:"Language",fuz_q:"Search Term Fuzziness",fuz_t:"Title Fuzziness",pages:"Pages of",origin:"Origin",composition:"Composition",provenance:"Provenance",shelfmark:"Shelfmark",type_digital_artifact:"type_digital_artifact",type_original_artifact:"type_original_artifact",type_content:"type_content"};return a[e]?a[e]:e}function t(e,a,t){var r=window.pss.createHtmlTag("option",{},"AND"),s={};a&&a.length>0&&"-"===a[0]&&(s.selected="selected");var l=window.pss.createHtmlTag("option",s,"NOT");return s={},e&&(s["data-key"]=e),a&&(s["data-val"]=a),t===!0&&(s.disabled="disabled"),window.pss.createHtmlTag("select",s,r+l)}function r(e,a){return window.pss.createHtmlTag("button",{"class":"trash select-facet","data-key":e,"data-value":a,"data-action":"remove"},'<img alt="Remove Term" src="'+window.site_path+'/assets/indexiuris/lvl2_trash.gif">')}function s(a){var t=e(".search_role_type option");if(0===t.length)return"";for(var r=0;r<t.length;r++){var s=e(t[r]);if(s.val()===a)return s.text()}return a}function l(a,r){var l=[["Search Term","q"],["Title","t"]];if(window.collex.hasLanguage&&l.push(["Language","lang"]),window.collex.hasManyRoles){if(a)for(var n in a)if(a.hasOwnProperty(n)){var i={role_ART:"r_art",role_AUT:"aut",role_EDT:"ed",role_OWN:"r_own",role_PBL:"pub"};i[n]&&(n=i[n]);var o=s(n);0!==o.indexOf("role_")&&o.length>0&&l.push([o,n])}}else l.push(["Author","aut"]),l.push(["Editor","ed"]),l.push(["Publisher","pub"]),l.push(["Artist","r_art"]),l.push(["Owner","r_own"]);l.push(["Year (YYYY)","y"]);for(var c="",d=0;d<l.length;d++)c+=window.pss.createHtmlTag("option",{value:l[d][1]},l[d][0]);var u={"class":"query_type_select"};r===!0&&(u.disabled="disabled");var p=window.pss.createHtmlTag("select",u,c),w=window.pss.createHtmlTag("input",{"class":"add-autocomplete regular-input",type:"text",placeholder:"click here to add new search term","data-autocomplete-url":"/search/auto_complete_for_q","data-autocomplete-field":".query_type_select",autocomplete:"off"})+window.pss.createHtmlTag("div",{"class":"auto_complete",id:"search_phrase_auto_complete",style:"display: none;"},""),g=e(".search_language").html(),h=window.pss.createHtmlTag("select",{"class":"language-input",style:"display:none;"},g),m=window.pss.createHtmlTag("button",{"class":"query_add"},"Add");return window.pss.createHtmlTag("tr",{"class":"new-search-term"},window.pss.createHtmlTag("td",{"class":"query_type"},p)+window.pss.createHtmlTag("td",{"class":"query_term"},w+h)+window.pss.createHtmlTag("td",{"class":"new-query_and-not"},t())+window.pss.createHtmlTag("td",{"class":"query_remove"},m))}function n(e,a,t,r){var s={type:"radio",name:e,value:a,id:e+a};return r&&(s.checked="checked"),window.pss.createHtmlTag("input",s)+window.pss.createHtmlTag("label",{"for":e+a},t)}var i=e("body");window.collex.createSearchForm=function(i,o,c){var d=e(".search-form"),u="",p="",w=!0;for(var g in i)if(i.hasOwnProperty(g)&&"pages_page"!==g&&"page"!==g&&"srt"!==g&&"dir"!==g&&"f"!==g)for(var h="string"==typeof i[g]?[i[g]]:i[g],m=0;m<h.length;m++){var f=h[m],_=g;if("a"===g){var y=window.collex.getArchive(f);y&&(f=y.name)}else if("o"===g)switch(f){case"typewright":_="TypeWright",f="Only resources that can be edited.";break;case"freeculture":_="Free Culture",f="Only resources that are freely available in their full form.";break;case"fulltext":_="Full Text",f="Only resources that contain full text."}w=!1;var v=f;if(v&&"-"===v[0]&&(v=v.substr(1)),("q"===g||"t"===g||"aut"===g||"ed"===g||"pub"===g||"r_art"===g||"r_own"===g||"y"===g)&&(v=window.pss.createHtmlTag("a",{"class":"modify_link query-editable",href:"#","data-type":g},v)),"lang"===g)for(var T=e(".search_language option"),H=0;H<T.length;H++){var b=e(T[H]);b.val()===v&&(v=b.text())}if(0===g.indexOf("role_")&&(_=s(_)),"pages"===g&&(v=c),0===g.indexOf("fuz_")){var q=g.split("_")[1];if(i[q]){var x=n(g,"1","Exact Match","1"===v)+n(g,"2","Some Variance","2"===v)+n(g,"3","More Variance","3"===v);v=window.pss.createHtmlTag("span",{"class":"mod-fuzzy"},x),p+=window.pss.createHtmlTag("tr",{},window.pss.createHtmlTag("td",{"class":"query_type"},a(_))+window.pss.createHtmlTag("td",{colspan:"3","class":"query_term"},v))}}else u+=window.pss.createHtmlTag("tr",{},window.pss.createHtmlTag("td",{"class":"query_type"},a(_))+window.pss.createHtmlTag("td",{"class":"query_term"},v)+window.pss.createHtmlTag("td",{"class":"query_and-not"},t(g,f,"pages"===g))+window.pss.createHtmlTag("td",{"class":"query_remove"},r(g,f)))}u+=p,u+=l(o,"pages"===g),d.html(u),d.find(".add-autocomplete").each(function(e,a){window.collex.initAutoComplete(a)}),w?e("#saved_search_name_span").html(""):window.collex.drawSavedSearch(w),window.collex.drawSavedSearchList()},i.on("change",".query_type_select",function(){var a=e(this),t=a.closest("tr");"lang"===a.val()?(t.find(".regular-input").hide(),t.find(".language-input").show()):(t.find(".regular-input").show(),t.find(".language-input").hide())})});