var access_number=1,format_number=1,genre_number=1,origin_number=1,language_number=1,composition_number=1,provenance_number=1,type_content_number=1,type_digital_artifact_number=1,type_original_artifact_number=1;jQuery(document).ready(function(e){"use strict";function l(l){e("#search_result_count").text("Search Results ("+window.collex.number_with_delimiter(l)+")")}function o(l,o){var a=e(".limit_to_federation .num_objects");a.each(function(o,a){a=e(a);var i=a.attr("data-federation");l[i]?a.text(window.collex.number_with_delimiter(l[i])):a.text("")});var i=e(".limit_to_federation input");o||(o=[window.collex.defaultFederation]);for(var n={},t=0;t<o.length;t++)n[o[t]]=!0;i.each(function(l,o){var a=o.name;e(o).prop("checked",n[a])})}function a(e){for(var l in e)if(e.hasOwnProperty(l)&&"srt"!==l&&"dir"!==l&&"f"!==l&&"fuz_t"!==l&&"fuz_q"!==l)return!1;return!0}function i(l){a(l.query)?(e(".has-results").hide(),e(".add_constraint_form").show()):(e(".add_constraint_form").hide(),e(".has-results").show(),0===l.hits.length?(e(".not-empty").hide(),e(".no_results_msg").show()):(e(".not-empty").show(),e(".no_results_msg").hide()));var o=l.page_results===!0;o?(e(".bulkcollect").hide(),e(".search_name_facet").hide(),e("#search_result_count").hide(),e(".sort").hide()):e(".page-results").hide()}function n(l){var o=e(".search_error_message");o.text(l),l&&l.length>0?o.show():o.hide()}function t(){e("#expand_all").show(),e("#collapse_all").hide()}function c(){r=setTimeout(function(){var l=e(".progress_timeout");l.each(function(l,o){o.src=e(o).attr("data-noimage")}),r=null},8e3)}var r,w=e("body");w.bind("RedrawSearchResults",function(a,w){if(!(w&&w.hits&&w.facets&&w.query))return void window.console.log("error redrawing search results",w);r&&(clearTimeout(r),r=null),i(w),n(w.message),window.collex.createResultRows(w),window.collex.createSearchForm(w.query,w.facets.role,w.title);window.collex.createFacets(w,1),window.collex.generalFacets=function(e){"Access"==e?(window.collex.origin_value=!1,window.collex.genre_value=!1,window.collex.format_value=!1,window.collex.language_value=!1,window.collex.provenance_value=!1,window.collex.composition_value=!1,window.collex.type_digital_artifact_value=!1,window.collex.type_original_artifact_value=!1,window.collex.access_value=!0,window.collex.createFacets(w,access_number),access_number+=1):"Genre"==e?(window.collex.access_value=!1,window.collex.origin_value=!1,window.collex.format_value=!1,window.collex.language_value=!1,window.collex.composition_value=!1,window.collex.provenance_value=!1,window.collex.type_digital_artifact_value=!1,window.collex.type_original_artifact_value=!1,window.collex.genre_value=!0,window.collex.createFacets(w,genre_number),genre_number+=1):"Format"==e?(window.collex.access_value=!1,window.collex.origin_value=!1,window.collex.genre_value=!1,window.collex.language_value=!1,window.collex.composition_value=!1,window.collex.provenance_value=!1,window.collex.type_digital_artifact_value=!1,window.collex.type_original_artifact_value=!1,window.collex.format_value=!0,window.collex.createFacets(w,format_number),format_number+=1):"Origin"==e?(window.collex.access_value=!1,window.collex.format_value=!1,window.collex.genre_value=!1,window.collex.language_value=!1,window.collex.provenance_value=!1,window.collex.composition_value=!1,window.collex.type_digital_artifact_value=!1,window.collex.type_original_artifact_value=!1,window.collex.origin_value=!0,window.collex.createFacets(w,origin_number),origin_number+=1):"Composition"==e?(window.collex.access_value=!1,window.collex.format_value=!1,window.collex.genre_value=!1,window.collex.language_value=!1,window.collex.origin_value=!1,window.collex.composition_value=!0,window.collex.provenance_value=!1,window.collex.type_digital_artifact_value=!1,window.collex.type_original_artifact_value=!1,window.collex.createFacets(w,composition_number),composition_number+=1):"Language"==e?(window.collex.access_value=!1,window.collex.format_value=!1,window.collex.genre_value=!1,window.collex.origin_value=!1,window.collex.composition_value=!1,window.collex.language_value=!0,window.collex.provenance_value=!1,window.collex.type_digital_artifact_value=!1,window.collex.type_original_artifact_value=!1,window.collex.createFacets(w,language_number),language_number+=1):"Provenance"==e?(window.collex.access_value=!1,window.collex.format_value=!1,window.collex.genre_value=!1,window.collex.language_value=!1,window.collex.origin_value=!1,window.collex.composition_value=!1,window.collex.type_digital_artifact_value=!1,window.collex.type_original_artifact_value=!1,window.collex.provenance_value=!0,window.collex.createFacets(w,provenance_number),provenance_number+=1):"type_digital_artifact"==e?(console.log("type_digital_artifact"),window.collex.access_value=!1,window.collex.format_value=!1,window.collex.genre_value=!1,window.collex.language_value=!1,window.collex.origin_value=!1,window.collex.composition_value=!1,window.collex.provenance_value=!1,window.collex.type_digital_artifact_value=!0,window.collex.type_original_artifact_value=!1,window.collex.createFacets(w,type_digital_artifact_number),type_digital_artifact_number+=1):"type_original_artifact"==e&&(console.log("type_original_artifact"),window.collex.access_value=!1,window.collex.format_value=!1,window.collex.genre_value=!1,window.collex.language_value=!1,window.collex.origin_value=!1,window.collex.composition_value=!1,window.collex.provenance_value=!1,window.collex.type_digital_artifact_value=!1,window.collex.type_original_artifact_value=!0,window.collex.createFacets(w,type_original_artifact_number),type_original_artifact_number+=1)},l(w.total_hits),o(w.facets.federation,w.query.f),t(),c();var _=w.page_results===!0;if(_){e(".search_results_hr").hide(),e("#bulk_collect_0").hide(),e(".page-search").hide(),e(".search_results_pages").hide(),window.collex.createPageResultRows(w);var u=w.query.pages_page?w.query.pages_page:1;window.collex.createPagination(u,w.total_pages,w.page_size,"pages"),e(".page-results").show()}else{var u=w.query.page?w.query.page:1;window.collex.createPagination(u,w.total_hits,w.page_size,"resources"),e(".page-results").empty(),e(".page-results").hide(),e(".search_results_pages").show()}}),w.bind("DrawHits",function(e,l){window.collex.createResultRows(l),c()})});