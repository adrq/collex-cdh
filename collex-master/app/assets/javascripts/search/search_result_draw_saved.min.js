jQuery(document).ready(function(e){"use strict";function a(){var e=window.location.search;"?"===e.substr(0,1)&&(e=e.substr(1));for(var a=0;a<window.collex.savedSearches.length;a++){var s=window.collex.savedSearches[a];if(s.url===e)return s}return null}function s(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function r(e){return s()+"/search?"+e}function n(e){var a=window.pss.createHtmlTag("img",{alt:"Permalink",src:"/assets/link.png",title:"Click here to get a permanent link for this saved search."});return window.pss.createHtmlTag("a",{"class":"nav_link",href:"#",onclick:"window.collex.showString(&quot;"+r(e)+"&quot;); return false;"},a)}jQuery(".has-results").on("click","#save-search-link",function(){window.collex.doSaveSearch()}),window.collex.drawSavedSearch=function(){var s=e("#saved_search_name_span"),r=window.collex.currentUserId&&window.collex.currentUserId>0;if(r){var t=a();t?s.html(" : "+t.name+" "+n(t.url)):s.html(window.pss.createHtmlTag("a",{"class":"modify_link",id:"save-search-link"},"[save search]"))}else{var l=window.pss.createHtmlTag("a",{"class":"nav_link",href:"#",onclick:"var dlg = new SignInDlg(); dlg.show('sign_in'); return false;"},"LOG IN");s.html(window.pss.createHtmlTag("span",{"class":"save_search_instruction"},"("+l+" to save this search)"))}},window.collex.drawSavedSearchList=function(){var a=e(".saved-search-list");if(0!==a.length){var s=10,t=Math.min(s,window.collex.savedSearches.length),l="";t!==window.collex.savedSearches.length&&(l+=window.pss.createHtmlTag("div",{"class":"empty_list_text"},window.pss.createHtmlTag("span",{"class":"hiding-text"},"Showing the "+t+" most recent of your "+window.collex.savedSearches.length+" saved searches. ")+window.pss.createHtmlTag("a",{"class":"nav_link saved_search_show_all",onclick:"window.collex.showHiddenSavedSearches('saved_search_show_all', 'saved_search_hidden_item' );"},"[show all]")));var o="";if(0===window.collex.savedSearches.length)o+=window.pss.createHtmlTag("tr",{},window.pss.createHtmlTag("td",{"class":"query_term"},"No searches saved"));else for(var i=0;i<window.collex.savedSearches.length;i++){var c=window.collex.savedSearches[i],d=window.pss.createHtmlTag("td",{"class":"query_term"},window.pss.createHtmlTag("a",{"class":"nav_link",href:r(c.url)},c.name)),w="serverAction({confirm: { title: 'Saved Search', message: 'Are you sure you want to remove this saved search?' }, action: { actions: this.href }, progress: { waitMessage: 'Please Wait...' }}); return false;",h=c.id?c.id:c.name,v=window.pss.createHtmlTag("td",{"class":"query_remove"},window.pss.createHtmlTag("a",{"class":"modify_link",href:"/search/remove_saved_search?id="+h,post:!0,onclick:w},"[remove]")),m={};i>=t&&(m["class"]="saved_search_hidden_item hidden");var u=window.pss.createHtmlTag("td",{"class":"saved_search_link"},n(c.url));o+=window.pss.createHtmlTag("tr",m,d+v+u)}l+=window.pss.createHtmlTag("table",{"class":"query"},o),a.html(l)}}});