function stopUpload(e){return e.length>0?editProfileDlg.fileUploadError(e):editProfileDlg.fileUploadFinished(),!0}var editProfileDlg=null,EditProfileDialog=Class.create({initialize:function(e,t,a,l){this.class_type="EditProfileDialog";var i=this,s=null;this.sendWithAjax=function(e,a){s=a.dlg,s.setFlash("Updating User Profile...",!1),editProfileDlg=i,t=window.site_path+"/my_collex/update_profile",submitForm("layout",t+"_upload")},this.fileUploadError=function(e){s.setFlash(e,!0)},this.fileUploadFinished=function(){var a=s.getAllData(),l=function(){s.cancel()};serverAction({action:{actions:t,els:e,params:a,onSuccess:l}})};var n={page:"layout",rows:[[{text:"User Name:",klass:"edit_facet_label"},{text:a.username,klass:"new_exhibit_label"}],[{text:"Full Name:",klass:"edit_facet_label"},{input:"fullname",value:a.fullname,klass:"edit_facet_input"}],[{text:"Email:",klass:"edit_facet_label"},{input:"account_email",value:a.email,klass:"edit_facet_input"}],[{text:"Hide email:",klass:"edit_facet_label"},{select:"hide_email",value:a.hide_email,options:[{value:"false",text:"false"},{value:"true",text:"true"}],klass:"edit_facet_input"}],[{text:"Institution:",klass:"edit_facet_label"},{input:"institution",value:a.institution,klass:"edit_facet_input"}],[{text:"Link:",klass:"edit_facet_label"},{input:"link",value:a.link,klass:"edit_facet_input"}],[{text:"(leave blank if not changing your password)",klass:"login_instructions"}],[{text:"Password:",klass:"edit_facet_label"},{password:"account_password",klass:"edit_facet_input"}],[{text:"Re-type password:",klass:"edit_facet_label"},{password:"account_password2",klass:"edit_facet_input"}],[{text:"About me:",klass:"edit_facet_label"},{textarea:"aboutme",value:a.about_me,klass:"edit_profile_textarea"}],[{text:"Thumbnail:",klass:"edit_facet_label"},{image:"image",klass:"edit_profile_image",size:35,value:l,removeButton:"Remove Thumbnail"}],[{rowClass:"gd_last_row"},{button:"Ok",arg0:t,callback:this.sendWithAjax,isDefault:!0},{button:"Cancel",callback:GeneralDialog.cancelCallback}]]},o={this_id:"edit_profile_dlg",pages:[n],body_style:"edit_palette_dlg",row_style:"new_exhibit_row",title:"Edit Profile",focus:"fullname"};s=new GeneralDialog(o),s.center()}});